Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
//REGION FlagToTag
IF
GameStarted(_,_)
AND
GlobalGetFlag("FIRE_LORE_Update_FlagToTag", 0)
THEN
//Cancel timers to "restart" them if the game is saved/reloaded before they finish.
TimerCancel("FIRE_LORE_RunUpdater");
TimerCancel("FIRE_LORE_CompleteUpdaterScript");
TimerLaunch("FIRE_LORE_RunUpdater", 250);

IF
TimerFinished("FIRE_LORE_RunUpdater")
AND
DB_IsPlayer(_Char)
THEN
//The iterator events are handled in the main script, since this script is temporarily active.
InventoryLaunchIterator(_Char, "FIRE_Lore_SetIdentifyFlagToTag", "");

IF
TimerFinished("FIRE_LORE_RunUpdater")
THEN
GlobalSetFlag("FIRE_LORE_Update_FlagToTag");
TimerLaunch("FIRE_LORE_CompleteUpdaterScript", 250);

IF
TimerFinished("FIRE_LORE_CompleteUpdaterScript")
THEN
GoalCompleted;
//END_REGION
EXITSECTION

ENDEXITSECTION
